{"version":3,"sources":["helpers/imagesApi.js","views/Home.js","components/SearchBar/SearchBar.js","helpers/get-query-params.js","views/MoviesPage.js","routes.js","views/MovieDetailsPage/MovieDetailsPage.js","components/Navigation/Navigation.js","components/HeaderApp.js","components/App.js","index.js"],"names":["baseUrl","apiKey","fetchMoviesWithQuery","searchQuery","page","fetch","then","response","json","results","fetchMoviesDetails","movieId","axios","get","data","fetchMoviesCast","cast","fetchMoviesReviews","fetchPopularMovies","Home","state","movies","setState","this","match","props","length","map","movie","key","id","to","pathname","url","from","location","original_title","Component","SearchBar","inputValue","handleChange","e","target","value","handleSubmit","preventDefault","onSubmit","className","type","autoComplete","autoFocus","placeholder","onChange","getQueryParams","string","queryString","parse","MoviesPage","fetchMovies","query","handleChangeQuery","history","push","search","prevProps","prevState","prevQuery","nextQuery","AsyncCast","lazy","AsyncReviews","MovieDetailsPage","handleGoBack","routes","movieImgUrl","poster_path","params","onClick","src","alt","overview","release_date","vote_average","exact","fallback","path","component","Navigation","HeaderApp","App","ReactDOM","render","document","getElementById"],"mappings":"+GAAA,+LAEMA,EAAU,+BAEVC,EAAS,mCAGFC,EAAuB,SAACC,GAA2B,IAAdC,EAAa,uDAAN,EACvD,OAAOC,MAAM,GAAD,OACPL,EADO,iCACyBC,EADzB,kBACyCE,EADzC,iBAC6DC,IAEtEE,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GAAD,OAAcA,EAASE,YAGpBC,EAAqB,SAACC,GACjC,OAAOC,IACJC,IADI,UACGb,EADH,kBACoBW,EADpB,oBACuCV,IAC3CK,MAAK,SAACC,GAAD,OAAcA,EAASO,SAGpBC,EAAkB,SAACJ,GAC9B,OAAOC,IACJC,IADI,UACGb,EADH,kBACoBW,EADpB,4BAC+CV,IACnDK,MAAK,SAACC,GAAD,OAAcA,EAASO,KAAKE,SAGzBC,EAAqB,SAACN,GACjC,OAAOC,IACJC,IADI,UAEAb,EAFA,kBAEiBW,EAFjB,4BAE4CV,EAF5C,2BAIJK,MAAK,SAACC,GAAD,OAAcA,EAASO,KAAKL,YAGzBS,EAAqB,WAChC,OAAOb,MAAM,GAAD,OAAIL,EAAJ,uCAA0CC,IACnDK,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACC,GAAD,OAAcA,EAASE,a,mOClCZU,E,4MACnBC,MAAQ,CACNC,OAAQ,I,kEAGW,IAAD,OAClBH,cAAqBZ,MAAK,SAACe,GAAD,OAAY,EAAKC,SAAS,CAAED,gB,+BAG9C,IACAA,EAAWE,KAAKH,MAAhBC,OACAG,EAAUD,KAAKE,MAAfD,MACR,OACE,gEAEGH,EAAOK,OAAS,GACf,4BACGL,EAAOM,KAAI,SAACC,GAAD,OACV,wBAAIC,IAAKD,EAAME,IACb,kBAAC,IAAD,CACEC,GAAI,CACFC,SAAS,GAAD,OAAKR,EAAMS,IAAX,kBAAwBL,EAAME,IACtCV,MAAO,CAAEc,KAAMV,EAAMW,YAGtBP,EAAMQ,0B,GAzBSC,aCArBC,G,MAAb,4MAKElB,MAAQ,CACNmB,WAAY,IANhB,EASEC,aAAe,SAACC,GACd,EAAKnB,SAAS,CAAEiB,WAAYE,EAAEC,OAAOC,SAVzC,EAaEC,aAAe,SAACH,GACdA,EAAEI,iBAEF,EAAKpB,MAAMqB,SAAS,EAAK1B,MAAMmB,YAC/B,EAAKjB,SAAS,CAAEiB,WAAY,MAjBhC,uDAoBY,IACAA,EAAehB,KAAKH,MAApBmB,WACR,OACE,4BAAQQ,UAAU,aAChB,0BAAMA,UAAU,aAAaD,SAAUvB,KAAKqB,cAC1C,4BAAQI,KAAK,SAASD,UAAU,qBAC9B,0BAAMA,UAAU,2BAAhB,WAEF,2BACEA,UAAU,mBACVC,KAAK,OACLC,aAAa,MACbC,WAAS,EACTC,YAAY,gBACZR,MAAOJ,EACPa,SAAU7B,KAAKiB,qBAnC3B,GAA+BH,c,iBCFhB,SAASgB,EAAeC,GACrC,OAAOC,IAAYC,MAAMF,G,ICGNG,E,4MACnBrC,MAAQ,CACNC,OAAQ,I,EAkBVqC,YAAc,SAACC,GACbzD,YAAqByD,GAAOrD,MAAK,SAACe,GAAD,OAAY,EAAKC,SAAS,CAAED,e,EAG/DuC,kBAAoB,SAACD,GACnB,EAAKlC,MAAMoC,QAAQC,KAAK,CACtB9B,SAAU,EAAKP,MAAMU,SAASH,SAC9B+B,OAAO,SAAD,OAAWJ,M,kEAtBA,IACXA,EAAUN,EAAe9B,KAAKE,MAAMU,SAAS4B,QAA7CJ,MACJA,GACFpC,KAAKmC,YAAYC,K,yCAIFK,EAAWC,GAAY,IACzBC,EAAcb,EAAeW,EAAU7B,SAAS4B,QAAvDJ,MACOQ,EAAcd,EAAe9B,KAAKE,MAAMU,SAAS4B,QAAxDJ,MACJO,IAAcC,GAChB5C,KAAKmC,YAAYS,K,+BAeX,IAAD,OACC9C,EAAWE,KAAKH,MAAhBC,OACAG,EAAUD,KAAKE,MAAfD,MACR,OACE,sEAEE,kBAAC,EAAD,CAAWsB,SAAUvB,KAAKqC,oBACzBvC,EAAOK,OAAS,GACf,4BACGL,EAAOM,KAAI,SAACC,GAAD,OACV,wBAAIC,IAAKD,EAAME,IACb,kBAAC,IAAD,CACEC,GAAI,CACFC,SAAS,GAAD,OAAKR,EAAMS,IAAX,YAAkBL,EAAME,IAChCV,MAAO,CAAEc,KAAM,EAAKT,MAAMU,YAG3BP,EAAMQ,0B,GAhDeC,aCNzB,EACP,IADO,EAED,UAFC,EAGM,mBCKf+B,G,MAAYC,gBAAK,kBACrB,iCAEIC,EAAeD,gBAAK,kBACxB,gCAGmBE,E,4MACnBnD,MAAQ,CACNQ,MAAO,M,EAST4C,aAAe,WAAO,IACZpD,EAAU,EAAKK,MAAMU,SAArBf,MAER,GAAIA,GAASA,EAAMc,KACjB,OAAO,EAAKT,MAAMoC,QAAQC,KAAK1C,EAAMc,MAOvC,EAAKT,MAAMoC,QAAQC,KAAKW,I,EAG1BC,YAAc,0DACsB,EAAKtD,MAAMQ,MAAM+C,c,kEArBhC,IAAD,OAClBjE,YAAmBa,KAAKE,MAAMD,MAAMoD,OAAOjE,SAASL,MAAK,SAACsB,GAAD,OACvD,EAAKN,SAAS,CAAEM,e,+BAqBV,IACAA,EAAUL,KAAKH,MAAfQ,MACAJ,EAAUD,KAAKE,MAAfD,MAER,OACE,6BACE,oEACA,4BAAQuB,UAAW,SAAU8B,QAAStD,KAAKiD,aAAcxB,KAAK,UAA9D,gBAGA,6BACCpB,GACC,yBAAKmB,UAAW,aACd,yBACEA,UAAW,kBACX+B,IAAG,UAAKvD,KAAKmD,eACbK,IAAKnD,EAAMQ,iBAEb,yBAAKW,UAAW,QACd,wBAAIA,UAAW,SAAUnB,EAAMQ,gBAC/B,wBAAIW,UAAW,YAAf,YACA,uBAAGA,UAAW,iBAAkBnB,EAAMoD,UACtC,wBAAIjC,UAAW,SAAf,gBACA,uBAAGA,UAAW,cAAenB,EAAMqD,cACnC,wBAAIlC,UAAW,WAAf,UACA,uBAAGA,UAAW,gBAAiBnB,EAAMsD,eAEvC,wBAAInC,UAAW,YACb,wBAAIA,UAAW,YACb,kBAAC,IAAD,CACEA,UAAW,SACXoC,OAAK,EACLpD,GAAI,CACFC,SAAS,GAAD,OAAKR,EAAMS,IAAX,SACRb,MAAO,CAAEc,KAAMX,KAAKE,MAAMU,YAL9B,SAWF,wBAAIY,UAAW,YACb,kBAAC,IAAD,CACEA,UAAW,SACXhB,GAAI,CACFC,SAAS,GAAD,OAAKR,EAAMS,IAAX,YACRb,MAAO,CAAEc,KAAMX,KAAKE,MAAMU,YAJ9B,cAaR,kBAAC,WAAD,CAAUiD,SAAU,2CAClB,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOC,KAAI,UAAK7D,EAAM6D,KAAX,SAAwBC,UAAWlB,IAC9C,kBAAC,IAAD,CAAOiB,KAAI,UAAK7D,EAAM6D,KAAX,YAA2BC,UAAWhB,W,GArFfjC,a,MCVvC,SAASkD,IACd,OACE,oCACE,iEACA,wBAAIxC,UAAW,mBACb,4BACE,kBAAC,IAAD,CAASA,UAAW,aAAcoC,OAAK,EAACpD,GAAI0C,GAA5C,SAIF,4BACE,kBAAC,IAAD,CAAS1B,UAAW,aAAchB,GAAI0C,GAAtC,aCbH,IAAMe,EAAY,WACvB,OAAO,kBAAC,EAAD,OCIIC,EAAb,uKAEI,OACE,oCACE,kBAAC,EAAD,MAEA,6BAEA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOJ,KAAMZ,EAAaU,OAAK,EAACG,UAAWnE,IAC3C,kBAAC,IAAD,CAAOkE,KAAMZ,EAAmBU,OAAK,EAACG,UAAW7B,IACjD,kBAAC,IAAD,CAAO4B,KAAMZ,EAA0Ba,UAAWf,IAClD,kBAAC,IAAD,CAAUxC,GAAG,YAZvB,GAAyBM,aCHzBqD,IAASC,OACP,kBAAC,IAAD,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.61c3f119.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = \"https://api.themoviedb.org/3\";\r\n\r\nconst apiKey = \"74deffb283af53f0c578a6d4e99eab77\";\r\n// `${baseUrl}/search/movie?api_key=${apiKey}&query=${searchQuery}&page=${page}`\r\n// results.map((result) => result.original_title));\r\nexport const fetchMoviesWithQuery = (searchQuery, page = 1) => {\r\n  return fetch(\r\n    `${baseUrl}/search/movie?api_key=${apiKey}&query=${searchQuery}&page=${page}`\r\n  )\r\n    .then((response) => response.json())\r\n    .then((response) => response.results);\r\n};\r\n\r\nexport const fetchMoviesDetails = (movieId) => {\r\n  return axios\r\n    .get(`${baseUrl}/movie/${movieId}?api_key=${apiKey}`)\r\n    .then((response) => response.data);\r\n};\r\n\r\nexport const fetchMoviesCast = (movieId) => {\r\n  return axios\r\n    .get(`${baseUrl}/movie/${movieId}/credits?api_key=${apiKey}`)\r\n    .then((response) => response.data.cast);\r\n};\r\n\r\nexport const fetchMoviesReviews = (movieId) => {\r\n  return axios\r\n    .get(\r\n      `${baseUrl}/movie/${movieId}/reviews?api_key=${apiKey}&language=en-US&page=1`\r\n    )\r\n    .then((response) => response.data.results);\r\n};\r\n\r\nexport const fetchPopularMovies = () => {\r\n  return fetch(`${baseUrl}/trending/movie/day?api_key=${apiKey}`)\r\n    .then((response) => response.json())\r\n    .then((response) => response.results);\r\n};\r\n\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { fetchPopularMovies } from \"../helpers/imagesApi\";\r\n\r\nexport default class Home extends Component {\r\n  state = {\r\n    movies: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetchPopularMovies().then((movies) => this.setState({ movies }));\r\n  }\r\n\r\n  render() {\r\n    const { movies } = this.state;\r\n    const { match } = this.props;\r\n    return (\r\n      <>\r\n        Welcome on Home component\r\n        {movies.length > 0 && (\r\n          <ul>\r\n            {movies.map((movie) => (\r\n              <li key={movie.id}>\r\n                <Link\r\n                  to={{\r\n                    pathname: `${match.url}movies/${movie.id}`,\r\n                    state: { from: match.location },\r\n                  }}\r\n                >\r\n                  {movie.original_title}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./SearchBar.css\";\r\n\r\nexport class SearchBar extends Component {\r\n  static propTypes = {\r\n    onSubmit: PropTypes.func,\r\n  };\r\n\r\n  state = {\r\n    inputValue: \"\",\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ inputValue: e.target.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.inputValue);\r\n    this.setState({ inputValue: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { inputValue } = this.state;\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form className=\"SearchForm\" onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search movies\"\r\n            value={inputValue}\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import queryString from \"query-string\";\r\n\r\nexport default function getQueryParams(string) {\r\n  return queryString.parse(string);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { fetchMoviesWithQuery } from \"../helpers/imagesApi\";\r\nimport { SearchBar } from \"../components/SearchBar/SearchBar\";\r\nimport getQueryParams from \"../helpers/get-query-params\";\r\n\r\nexport default class MoviesPage extends Component {\r\n  state = {\r\n    movies: [],\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { query } = getQueryParams(this.props.location.search);\r\n    if (query) {\r\n      this.fetchMovies(query);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { query: prevQuery } = getQueryParams(prevProps.location.search);\r\n    const { query: nextQuery } = getQueryParams(this.props.location.search);\r\n    if (prevQuery !== nextQuery) {\r\n      this.fetchMovies(nextQuery);\r\n    }\r\n  }\r\n\r\n  fetchMovies = (query) => {\r\n    fetchMoviesWithQuery(query).then((movies) => this.setState({ movies }));\r\n  };\r\n\r\n  handleChangeQuery = (query) => {\r\n    this.props.history.push({\r\n      pathname: this.props.location.pathname,\r\n      search: `query=${query}`,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { movies } = this.state;\r\n    const { match } = this.props;\r\n    return (\r\n      <>\r\n        Welcome on MoviesPage component\r\n        <SearchBar onSubmit={this.handleChangeQuery} />\r\n        {movies.length > 0 && (\r\n          <ul>\r\n            {movies.map((movie) => (\r\n              <li key={movie.id}>\r\n                <Link\r\n                  to={{\r\n                    pathname: `${match.url}/${movie.id}`,\r\n                    state: { from: this.props.location },\r\n                  }}\r\n                >\r\n                  {movie.original_title}\r\n                </Link>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","export default {\r\n  home: \"/\",\r\n  moviesPage: \"/movies\",\r\n  moviesDetailsPage: \"/movies/:movieId\",\r\n  cast: \"/movies/:movieId/cast\",\r\n  reviews: \"/movies/:movieId/reviews\",\r\n};\r\n","import React, { Component, lazy, Suspense } from \"react\";\r\nimport { Route, Switch, NavLink } from \"react-router-dom\";\r\nimport { fetchMoviesDetails } from \"../../helpers/imagesApi\";\r\n// import Cast from \"../Cast\";\r\n// import Reviews from \"../Reviews\";\r\nimport routes from \"../../routes\";\r\nimport \"./MovieDetailsPage.css\";\r\n\r\nconst AsyncCast = lazy(() =>\r\n  import(\"../Cast\" /* webpackChunkName: \"cast-section\" */)\r\n);\r\nconst AsyncReviews = lazy(() =>\r\n  import(\"../Reviews\" /* webpackChunkName: \"review-section\" */)\r\n);\r\n\r\nexport default class MovieDetailsPage extends Component {\r\n  state = {\r\n    movie: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    fetchMoviesDetails(this.props.match.params.movieId).then((movie) =>\r\n      this.setState({ movie })\r\n    );\r\n  }\r\n\r\n  handleGoBack = () => {\r\n    const { state } = this.props.location;\r\n\r\n    if (state && state.from) {\r\n      return this.props.history.push(state.from);\r\n    }\r\n\r\n    // if (state.from.pathname === \"путь на отрисованный фильм\") {\r\n    //   return this.props.history.push({pathname:\"/movies\", search:\"последний запрос\"});\r\n    // }\r\n\r\n    this.props.history.push(routes.home);\r\n  };\r\n\r\n  movieImgUrl = () =>\r\n    `https://image.tmdb.org/t/p/w400${this.state.movie.poster_path}`;\r\n\r\n  render() {\r\n    const { movie } = this.state;\r\n    const { match } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <p>Welcome on MovieDetailsPage component</p>\r\n        <button className={\"Button\"} onClick={this.handleGoBack} type=\"button\">\r\n          Back to list\r\n        </button>\r\n        <hr></hr>\r\n        {movie && (\r\n          <div className={\"Container\"}>\r\n            <img\r\n              className={\"ImageItem-image\"}\r\n              src={`${this.movieImgUrl()}`}\r\n              alt={movie.original_title}\r\n            />\r\n            <div className={\"Info\"}>\r\n              <h1 className={\"Title\"}>{movie.original_title}</h1>\r\n              <h2 className={\"Overview\"}>Overview</h2>\r\n              <p className={\"Overview-item\"}>{movie.overview}</p>\r\n              <h2 className={\"Date \"}>Release date</h2>\r\n              <p className={\"Date-item \"}>{movie.release_date}</p>\r\n              <h2 className={\"Rating \"}>Rating</h2>\r\n              <p className={\"Rating-item \"}>{movie.vote_average}</p>\r\n            </div>\r\n            <ul className={\"Nav-list\"}>\r\n              <li className={\"Nav-item\"}>\r\n                <NavLink\r\n                  className={\"Button\"}\r\n                  exact\r\n                  to={{\r\n                    pathname: `${match.url}/cast`,\r\n                    state: { from: this.props.location },\r\n                  }}\r\n                >\r\n                  Cast\r\n                </NavLink>\r\n              </li>\r\n              <li className={\"Nav-item\"}>\r\n                <NavLink\r\n                  className={\"Button\"}\r\n                  to={{\r\n                    pathname: `${match.url}/reviews`,\r\n                    state: { from: this.props.location },\r\n                  }}\r\n                >\r\n                  Reviews\r\n                </NavLink>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        )}\r\n        <Suspense fallback={<h2>Loading...</h2>}>\r\n          <Switch>\r\n            <Route path={`${match.path}/cast`} component={AsyncCast} />\r\n            <Route path={`${match.path}/reviews`} component={AsyncReviews} />\r\n          </Switch>\r\n        </Suspense>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport routes from \"../../routes\";\r\nimport \"./Navigation.css\";\r\n\r\nexport function Navigation() {\r\n  return (\r\n    <>\r\n      <span>Welcome on Navigation component</span>\r\n      <ul className={\"Navigation-list\"}>\r\n        <li>\r\n          <NavLink className={\"Navigation\"} exact to={routes.home}>\r\n            Home\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink className={\"Navigation\"} to={routes.moviesPage}>\r\n            Movies\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Navigation } from \"./Navigation/Navigation\";\r\n\r\nexport const HeaderApp = () => {\r\n  return <Navigation />;\r\n};\r\n","import React, { Component } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport Home from \"../views/Home\";\nimport MoviesPage from \"../views/MoviesPage\";\nimport MovieDetailsPage from \"../views/MovieDetailsPage/MovieDetailsPage\";\nimport routes from \"../routes\";\nimport { HeaderApp } from \"./HeaderApp\";\n\nexport class App extends Component {\n  render() {\n    return (\n      <>\n        <HeaderApp />\n\n        <hr></hr>\n\n        <Switch>\n          <Route path={routes.home} exact component={Home} />\n          <Route path={routes.moviesPage} exact component={MoviesPage} />\n          <Route path={routes.moviesDetailsPage} component={MovieDetailsPage} />\n          <Redirect to=\"/\" />\n        </Switch>\n      </>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { App } from \"./components/App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}